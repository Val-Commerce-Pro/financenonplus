
<!-- jquery 3.3.1 - Don't add defer tag!!! -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
{{ 'consors-product.css' | asset_url | stylesheet_tag }}
<script defer src="{{ 'calculator.js' | asset_url }}"></script>
<script defer src="{{ 'consors-product.js' | asset_url }}"></script>
<link rel="stylesheet" href="{{ 'calc.css' | asset_url }}">

<div hidden id="cf-product-id" class="HiddenInfo">{{ product.variants[0].id }}</div>
<div hidden id="cf-secure-url" class="HiddenInfo">{{ shop.secure_url }}</div>
<div hidden id="cf-product-price" class="albisHiddenInfo">{{ product.price }}</div>
<div hidden id="cf-shop-domain" class="HiddenInfo">{{ shop.domain }}</div>
<div hidden id="cf-cart-price" class="HiddenInfo">{{ cart.total_price }}</div>

<div class="calculatorContainer" id="cf-product-section">
  <div class="separator">- oder -</div>
  <a id="addProductAndRedirect" class="button inanzierenBtn" href="https://{{ shop.permanent_domain }}/pages/consors-efi">ðŸ‘‰ Jetzt Finanzieren</a>
  <div class="product--financing">
    <img class="financing--logo" src="{{'Consors_Finanz_Logo.png' | asset_url}}" alt="Consors Finanz Logo" width="200" height="45"><br>
    Finanzieren Sie bequem mit Consors Finanz.<br>
      <span id="additional-calculator-text">Weitere Informationen finden sie </span>
      <button class="btn-reset inlineBtn" id="openDrawerBtn">hier</button>
  </div>
</div>

  <div id="inlineCalcOverlay" class="inline-calc-overlay"></div>
  <div id="calcDrawerContainer" class="calc-drawer-container">
    <span id="inlineCalcCloseBtn" class="inline-calc-closeBtn">&times;</span>
    <div id="inlineCalcDrawerContent" class="inline-calc-drawer-content">
      <div id="calculator"></div>
    </div>
  </div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const openBtn = document.getElementById("openDrawerBtn");
    const overlay = document.getElementById("inlineCalcOverlay");
    const drawer = document.getElementById("calcDrawerContainer");
    document.body.appendChild(overlay);
    document.body.appendChild(drawer);
    const closeBtn = document.getElementById("inlineCalcCloseBtn");

    function openDrawer() {
      overlay.style.display = "block";
      drawer.style.display = "block";
      setTimeout(() => {
        drawer.classList.add("open");
      }, 10);
    }

    function closeDrawer() {
      drawer.classList.remove("open");
      setTimeout(() => {
        overlay.style.display = "none";
        drawer.style.display = "none";
      }, 500); 
    }

    openBtn.addEventListener("click", openDrawer);
    closeBtn.addEventListener("click", closeDrawer);
    overlay.addEventListener("click", closeDrawer);
  });
  </script>

{% schema %}
{
  "name": "Product Consors Finance",
  "target": "section"
}
{% endschema %}
